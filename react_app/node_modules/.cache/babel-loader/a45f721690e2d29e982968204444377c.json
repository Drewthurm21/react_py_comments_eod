{"ast":null,"code":"const GET_COMMENTS = 'comments/LOAD';\nconst CREATE_COMMENT = 'comment/ADD';\nconst DELETE_COMMENT = 'comment/DELETE';\nconst EDIT_COMMENT = 'comment/EDIT';\n\nconst getCommentsAction = commentsOject => {\n  return {\n    type: GET_COMMENTS,\n    payload: commentsOject\n  };\n};\n\nconst editSingleComment = comment => {\n  return {\n    type: EDIT_COMMENT,\n    payload: comment\n  };\n};\n\nconst deleteCommentAction = deletedComment => {\n  return {\n    type: DELETE_COMMENT,\n    payload: deletedComment\n  };\n};\n\nconst createCommentAction = comment => {\n  return {\n    type: CREATE_COMMENT,\n    payload: comment\n  };\n};\n\nexport const getCommentsThunk = () => async dispatch => {\n  const response = await fetch('/comments');\n  let comment_obj = await response.json();\n\n  if (response.ok) {\n    dispatch(getCommentsAction(comment_obj));\n  } else {//error stuff\n  }\n};\nexport const createCommentThunk = comment => async dispatch => {\n  let res = await fetch('/new', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(comment)\n  });\n\n  if (res.ok) {\n    let comment = await res.json();\n    dispatch(createCommentAction(comment));\n  }\n};\nexport const editCommentThunk = editedComment => async dispatch => {\n  let req = await fetch(`/edit/${editedComment.id}`, {\n    method: \"PUT\",\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(editedComment)\n  });\n  let updatedComment = await req.json();\n\n  if (req.ok) {\n    dispatch(editSingleComment(updatedComment));\n  }\n};\nexport const deleteCommentThunk = id => async dispatch => {\n  const response = await fetch(`/delete/${id}`);\n\n  if (response.ok) {\n    dispatch(deleteCommentAction(id));\n  } else {//error stuff\n  }\n};\nconst initialState = {};\nexport default function commentsReducer(state = initialState, action) {\n  const newState = { ...state\n  };\n\n  switch (action.type) {\n    case GET_COMMENTS:\n      return action.payload;\n\n    case CREATE_COMMENT:\n      newState[action.payload.id] = action.payload;\n      return newState;\n\n    case EDIT_COMMENT:\n      newState[action.payload.id] = action.payload;\n      return newState;\n\n    case DELETE_COMMENT:\n      delete newState[action.payload];\n      return newState;\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/home/drew/myrepo/React_EOD-starter/react_app/src/store/comments.js"],"names":["GET_COMMENTS","CREATE_COMMENT","DELETE_COMMENT","EDIT_COMMENT","getCommentsAction","commentsOject","type","payload","editSingleComment","comment","deleteCommentAction","deletedComment","createCommentAction","getCommentsThunk","dispatch","response","fetch","comment_obj","json","ok","createCommentThunk","res","method","headers","body","JSON","stringify","editCommentThunk","editedComment","req","id","updatedComment","deleteCommentThunk","initialState","commentsReducer","state","action","newState"],"mappings":"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","sourcesContent":["const GET_COMMENTS = 'comments/LOAD'\r\nconst CREATE_COMMENT = 'comment/ADD'\r\nconst DELETE_COMMENT = 'comment/DELETE'\r\nconst EDIT_COMMENT = 'comment/EDIT'\r\n\r\nconst getCommentsAction = (commentsOject) => {\r\n    return {\r\n        type: GET_COMMENTS,\r\n        payload: commentsOject\r\n    }\r\n}\r\n\r\nconst editSingleComment = (comment) => {\r\n    return {\r\n        type: EDIT_COMMENT,\r\n        payload: comment\r\n    }\r\n}\r\n\r\nconst deleteCommentAction = (deletedComment) => {\r\n    return {\r\n        type: DELETE_COMMENT,\r\n        payload: deletedComment\r\n    }\r\n}\r\n\r\nconst createCommentAction = (comment) => {\r\n    return {\r\n        type: CREATE_COMMENT,\r\n        payload: comment\r\n    }\r\n}\r\n\r\nexport const getCommentsThunk = () => async (dispatch) => {\r\n    const response = await fetch('/comments')\r\n    let comment_obj = await response.json()\r\n\r\n    if (response.ok) {\r\n        dispatch(getCommentsAction(comment_obj))\r\n    } else {\r\n        //error stuff\r\n    }\r\n}\r\n\r\nexport const createCommentThunk = (comment) => async (dispatch) => {\r\n    let res = await fetch('/new', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(comment)\r\n    })\r\n\r\n    if (res.ok) {\r\n        let comment = await res.json()\r\n        dispatch(createCommentAction(comment))\r\n    }\r\n}\r\n\r\nexport const editCommentThunk = (editedComment) => async (dispatch) => {\r\n    let req = await fetch(`/edit/${editedComment.id}`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(editedComment)\r\n    })\r\n\r\n    let updatedComment = await req.json()\r\n    if (req.ok) {\r\n        dispatch(editSingleComment(updatedComment))\r\n    }\r\n}\r\n\r\nexport const deleteCommentThunk = (id) => async (dispatch) => {\r\n    const response = await fetch(`/delete/${id}`)\r\n    if (response.ok) {\r\n        dispatch(deleteCommentAction(id))\r\n    } else {\r\n        //error stuff\r\n    }\r\n}\r\n\r\n\r\nconst initialState = {}\r\nexport default function commentsReducer(state = initialState, action) {\r\n    const newState = { ...state }\r\n    switch (action.type) {\r\n        case GET_COMMENTS:\r\n            return action.payload\r\n        case CREATE_COMMENT:\r\n            newState[action.payload.id] = action.payload\r\n            return newState\r\n        case EDIT_COMMENT:\r\n            newState[action.payload.id] = action.payload\r\n            return newState\r\n        case DELETE_COMMENT:\r\n            delete newState[action.payload]\r\n            return newState\r\n        default:\r\n            return state\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}