{"ast":null,"code":"const GET_COMMENTS = 'comments/LOAD';\nconst CREATE_COMMENT = 'comment/ADD';\nconst DELETE_COMMENT = 'comment/DELETE';\n\nconst getCommentsAction = commentsOject => {\n  return {\n    type: GET_COMMENTS,\n    payload: commentsOject\n  };\n};\n\nconst deleteCommentAction = deletedComment => {\n  return {\n    type: DELETE_COMMENT,\n    payload: deletedComment\n  };\n};\n\nconst createCommentAction = comment => {\n  return {\n    type: CREATE_COMMENT,\n    payload: comment\n  };\n};\n\nexport const getCommentsThunk = () => async dispatch => {\n  const response = await fetch('/comments');\n  let comment_obj = await response.json();\n  let commentArr = comment_obj.comments;\n\n  if (response.ok) {\n    dispatch(getCommentsAction(commentArr));\n  } else {//error stuff\n  }\n};\nexport const createCommentThunk = comment => async dispatch => {\n  let res = await fetch('/new', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(comment)\n  });\n\n  if (res.ok) {\n    let comment = await res.json();\n    dispatch(createCommentAction(comment));\n  }\n};\nexport const deleteCommentThunk = id => async dispatch => {\n  const response = await fetch(`/delete/${id}`);\n\n  if (response.ok) {\n    dispatch(deleteCommentAction(id));\n  } else {//error stuff\n  }\n};\nconst initialState = {\n  comments: []\n};\nexport default function commentsReducer(state = initialState, action) {\n  const newState = [...state];\n\n  switch (action.type) {\n    case GET_COMMENTS:\n      return {\n        comments: action.payload\n      };\n\n    case CREATE_COMMENT:\n      newState.comments.push(action.payload);\n      return newState;\n\n    case DELETE_COMMENT:\n      return newState.filter(comment => comment.id !== action.payload);\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/home/drew/myrepo/React_EOD-starter/react_app/src/store/comments.js"],"names":["GET_COMMENTS","CREATE_COMMENT","DELETE_COMMENT","getCommentsAction","commentsOject","type","payload","deleteCommentAction","deletedComment","createCommentAction","comment","getCommentsThunk","dispatch","response","fetch","comment_obj","json","commentArr","comments","ok","createCommentThunk","res","method","headers","body","JSON","stringify","deleteCommentThunk","id","initialState","commentsReducer","state","action","newState","push","filter"],"mappings":"AAAA,MAAMA,YAAY,GAAG,eAArB;AACA,MAAMC,cAAc,GAAG,aAAvB;AACA,MAAMC,cAAc,GAAG,gBAAvB;;AAGA,MAAMC,iBAAiB,GAAIC,aAAD,IAAmB;AACzC,SAAO;AACHC,IAAAA,IAAI,EAAEL,YADH;AAEHM,IAAAA,OAAO,EAAEF;AAFN,GAAP;AAIH,CALD;;AAOA,MAAMG,mBAAmB,GAAIC,cAAD,IAAoB;AAC5C,SAAO;AACHH,IAAAA,IAAI,EAAEH,cADH;AAEHI,IAAAA,OAAO,EAAEE;AAFN,GAAP;AAIH,CALD;;AAOA,MAAMC,mBAAmB,GAAIC,OAAD,IAAa;AACrC,SAAO;AACHL,IAAAA,IAAI,EAAEJ,cADH;AAEHK,IAAAA,OAAO,EAAEI;AAFN,GAAP;AAIH,CALD;;AAOA,OAAO,MAAMC,gBAAgB,GAAG,MAAM,MAAOC,QAAP,IAAoB;AACtD,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,WAAD,CAA5B;AACA,MAAIC,WAAW,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAxB;AACA,MAAIC,UAAU,GAAGF,WAAW,CAACG,QAA7B;;AACA,MAAIL,QAAQ,CAACM,EAAb,EAAiB;AACbP,IAAAA,QAAQ,CAACT,iBAAiB,CAACc,UAAD,CAAlB,CAAR;AACH,GAFD,MAEO,CACH;AACH;AACJ,CATM;AAWP,OAAO,MAAMG,kBAAkB,GAAIV,OAAD,IAAa,MAAOE,QAAP,IAAoB;AAC/D,MAAIS,GAAG,GAAG,MAAMP,KAAK,CAAC,MAAD,EAAS;AAC1BQ,IAAAA,MAAM,EAAE,MADkB;AAE1BC,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB,KAFiB;AAG1BC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAehB,OAAf;AAHoB,GAAT,CAArB;;AAMA,MAAIW,GAAG,CAACF,EAAR,EAAY;AACR,QAAIT,OAAO,GAAG,MAAMW,GAAG,CAACL,IAAJ,EAApB;AACAJ,IAAAA,QAAQ,CAACH,mBAAmB,CAACC,OAAD,CAApB,CAAR;AACH;AACJ,CAXM;AAaP,OAAO,MAAMiB,kBAAkB,GAAIC,EAAD,IAAQ,MAAOhB,QAAP,IAAoB;AAC1D,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,WAAUc,EAAG,EAAf,CAA5B;;AACA,MAAIf,QAAQ,CAACM,EAAb,EAAiB;AACbP,IAAAA,QAAQ,CAACL,mBAAmB,CAACqB,EAAD,CAApB,CAAR;AACH,GAFD,MAEO,CACH;AACH;AACJ,CAPM;AAUP,MAAMC,YAAY,GAAG;AACjBX,EAAAA,QAAQ,EAAE;AADO,CAArB;AAGA,eAAe,SAASY,eAAT,CAAyBC,KAAK,GAAGF,YAAjC,EAA+CG,MAA/C,EAAuD;AAClE,QAAMC,QAAQ,GAAG,CAAC,GAAGF,KAAJ,CAAjB;;AACA,UAAQC,MAAM,CAAC3B,IAAf;AACI,SAAKL,YAAL;AACI,aAAO;AACHkB,QAAAA,QAAQ,EAAEc,MAAM,CAAC1B;AADd,OAAP;;AAGJ,SAAKL,cAAL;AACIgC,MAAAA,QAAQ,CAACf,QAAT,CAAkBgB,IAAlB,CAAuBF,MAAM,CAAC1B,OAA9B;AACA,aAAO2B,QAAP;;AACJ,SAAK/B,cAAL;AACI,aAAO+B,QAAQ,CAACE,MAAT,CAAgBzB,OAAO,IAAIA,OAAO,CAACkB,EAAR,KAAeI,MAAM,CAAC1B,OAAjD,CAAP;;AACJ;AACI,aAAOyB,KAAP;AAXR;AAaH","sourcesContent":["const GET_COMMENTS = 'comments/LOAD'\r\nconst CREATE_COMMENT = 'comment/ADD'\r\nconst DELETE_COMMENT = 'comment/DELETE'\r\n\r\n\r\nconst getCommentsAction = (commentsOject) => {\r\n    return {\r\n        type: GET_COMMENTS,\r\n        payload: commentsOject\r\n    }\r\n}\r\n\r\nconst deleteCommentAction = (deletedComment) => {\r\n    return {\r\n        type: DELETE_COMMENT,\r\n        payload: deletedComment\r\n    }\r\n}\r\n\r\nconst createCommentAction = (comment) => {\r\n    return {\r\n        type: CREATE_COMMENT,\r\n        payload: comment\r\n    }\r\n}\r\n\r\nexport const getCommentsThunk = () => async (dispatch) => {\r\n    const response = await fetch('/comments')\r\n    let comment_obj = await response.json()\r\n    let commentArr = comment_obj.comments\r\n    if (response.ok) {\r\n        dispatch(getCommentsAction(commentArr))\r\n    } else {\r\n        //error stuff\r\n    }\r\n}\r\n\r\nexport const createCommentThunk = (comment) => async (dispatch) => {\r\n    let res = await fetch('/new', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(comment)\r\n    })\r\n\r\n    if (res.ok) {\r\n        let comment = await res.json()\r\n        dispatch(createCommentAction(comment))\r\n    }\r\n}\r\n\r\nexport const deleteCommentThunk = (id) => async (dispatch) => {\r\n    const response = await fetch(`/delete/${id}`)\r\n    if (response.ok) {\r\n        dispatch(deleteCommentAction(id))\r\n    } else {\r\n        //error stuff\r\n    }\r\n}\r\n\r\n\r\nconst initialState = {\r\n    comments: []\r\n}\r\nexport default function commentsReducer(state = initialState, action) {\r\n    const newState = [...state]\r\n    switch (action.type) {\r\n        case GET_COMMENTS:\r\n            return {\r\n                comments: action.payload\r\n            }\r\n        case CREATE_COMMENT:\r\n            newState.comments.push(action.payload)\r\n            return newState\r\n        case DELETE_COMMENT:\r\n            return newState.filter(comment => comment.id !== action.payload)\r\n        default:\r\n            return state\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}